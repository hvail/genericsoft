# AACDEAFECDABFDSEEEAC .erlang.cookie

# VERSION 1.0.0.1
# ×÷Õß£º»Æ¿¡½Ü
# Rabbitmq Build Master

FROM rabbitmq:3.6.6-management

# Ç©Ãû
MAINTAINER hvail "415195993@qq.com"

# ADD rabbitmq.config /etc/rabbitmq/
# RUN chmod u+rw /etc/rabbitmq/rabbitmq.config

RUN cat /etc/passwd
ADD .erlang.cookie /var/lib/rabbitmq/.erlangs.cookie

RUN chown -R rabbitmq:rabbitmq /var/lib/rabbitmq/
RUN chmod 400 /var/lib/rabbitmq/.erlang.cookie

RUN ls -al /var/lib/rabbitmq/

# RUN chmod -w /var/lib/rabbitmq/.erlang.cookie
# RUN chmod g-r /var/lib/rabbitmq/.erlang.cookie
# RUN chmod o-r /var/lib/rabbitmq/.erlang.cookie

# RUN mkdir /opt/rabbit
# ADD startrabbit.sh /opt/rabbit/
# RUN chmod a+x /opt/rabbit/startrabbit.sh

CMD ["/bin/sh","-c","rabbitmq-server start"]