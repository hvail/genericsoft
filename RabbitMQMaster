# VERSION 1.0.0.1
# ×÷Õß£º»Æ¿¡½Ü
# Rabbitmq Build Master
FROM rabbitmq

# Ç©Ãû
MAINTAINER hvail "415195993@qq.com"

RUN rabbitmq-plugins enable --offline rabbitmq_management

EXPOSE 15671 15672


# ADD rabbitmq.config /etc/rabbitmq/
# RUN chmod u+rw /etc/rabbitmq/rabbitmq.config

# RUN cat /etc/passwd
# ADD .erlang.cookie /var/lib/rabbitmq/.erlang.cookie

# Add .erlang.cookie /var/

# RUN chown -R rabbitmq:rabbitmq /var/lib/rabbitmq/
# RUN chmod 400 /var/lib/rabbitmq/.erlang.cookie

# RUN ls -al /var/lib/rabbitmq/

# RUN chmod -w /var/lib/rabbitmq/.erlang.cookie
# RUN chmod g-r /var/lib/rabbitmq/.erlang.cookie
# RUN chmod o-r /var/lib/rabbitmq/.erlang.cookie

RUN mkdir /opt/rabbit
ADD startrabbit.sh /opt/rabbit/
RUN chmod a+x /opt/rabbit/startrabbit.sh

RUN 

CMD ["/opt/rabbit/startrabbit.sh"]